# 🎨 GUI Manager - Руководство пользователя

Графический интерфейс для управления Telegram Book Converter Bot

## 📋 Содержание

- [Быстрый старт](#быстрый-старт)
- [Основной интерфейс](#основной-интерфейс)
- [Управление токеном](#управление-токеном)
- [Управление ботом](#управление-ботом)
- [Мониторинг и логи](#мониторинг-и-логи)
- [Настройки](#настройки)
- [Устранение неполадок](#устранение-неполадок)

## 🚀 Быстрый старт

### 1. Установка и запуск

```bash
# Запуск GUI (автоматически установит зависимости)
./start_gui.sh

# Проверка готовности без запуска
./start_gui.sh --check-only

# Принудительная переустановка зависимостей
./start_gui.sh --install-deps
```

### 2. Первая настройка

1. **Введите токен бота**: Получите токен у [@BotFather](https://t.me/BotFather)
2. **Нажмите "Сохранить токен"**: Токен будет сохранен в `.env` файле
3. **Нажмите "Запустить бота"**: Бот начнет работу
4. **Проверьте статус**: Индикатор должен показать "🟢 Запущен"

## 🖥️ Основной интерфейс

### Элементы интерфейса

```
┌─────────────────────────────────────────────────────────────┐
│ 🤖 Telegram Book Converter Bot - GUI Manager               │
├─────────────────────────────────────────────────────────────┤
│ Токен бота: [••••••••••••••••••••] [👁️] [Сохранить токен] │
│                                         [Проверить токен]  │
├─────────────────────────────────────────────────────────────┤
│ Статус: [🟢 Запущен]                    [Запустить бота]   │
│                                         [Остановить бота]  │
│                                         [Перезапустить]    │
├─────────────────────────────────────────────────────────────┤
│ ┌─ Логи бота ─────────────────────────────────────────────┐ │
│ │ [INFO] Bot started successfully                         │ │
│ │ [INFO] Polling started                                  │ │
│ │ └─────────────────────────────────────────────────────┘ │ │
│ [Очистить логи] [Сохранить логи] [Автообновление: ✓]      │ │
├─────────────────────────────────────────────────────────────┤
│ [Настройки] [Справка] [О программе]                        │
└─────────────────────────────────────────────────────────────┘
```

### Цветовые индикаторы

- 🟢 **Зеленый**: Бот запущен и работает
- 🔴 **Красный**: Бот остановлен
- 🟡 **Желтый**: Бот в процессе запуска/остановки
- ⚫ **Серый**: Статус неизвестен

## 🔑 Управление токеном

### Ввод токена

1. **Получение токена**:
   - Напишите [@BotFather](https://t.me/BotFather)
   - Выполните команду `/newbot`
   - Следуйте инструкциям
   - Скопируйте полученный токен

2. **Ввод в GUI**:
   - Вставьте токен в поле "Токен бота"
   - Нажмите кнопку "👁️" для показа/скрытия токена
   - Нажмите "Сохранить токен"

### Валидация токена

```bash
# Формат токена: 123456789:ABCdefGHijklMNopqrsTUvwxyz
# Примеры валидных токенов:
1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789
987654321:AABBccddEEFFgghhIIJJkkllMMnnOOppQQ
```

### Проверка токена

- Нажмите "Проверить токен" для валидации
- ✅ **Валидный**: Токен корректный, можно запускать бота
- ❌ **Невалидный**: Проверьте правильность токена

## 🤖 Управление ботом

### Запуск бота

1. **Убедитесь, что токен сохранен**
2. **Нажмите "Запустить бота"**
3. **Дождитесь изменения статуса на 🟢**

### Остановка бота

1. **Нажмите "Остановить бота"**
2. **Подождите завершения процессов**
3. **Статус изменится на 🔴**

### Перезапуск бота

1. **Нажмите "Перезапустить бота"**
2. **Бот автоматически остановится и запустится заново**
3. **Полезно при изменении конфигурации**

### Проверка работы

```bash
# Отправьте боту сообщение:
/start

# Ожидаемый ответ:
Добро пожаловать в Book Converter Bot! 📚
Отправьте мне файл книги для конвертации.
```

## 📊 Мониторинг и логи

### Просмотр логов

- **Автообновление**: Логи обновляются в реальном времени
- **Прокрутка**: Автоматическая прокрутка к новым сообщениям
- **Фильтрация**: Показываются только важные события

### Типы сообщений

```bash
[INFO]    - Информационные сообщения
[WARNING] - Предупреждения
[ERROR]   - Ошибки
[DEBUG]   - Отладочная информация (в режиме отладки)
```

### Управление логами

- **Очистить логи**: Удаляет все сообщения из окна
- **Сохранить логи**: Экспортирует логи в файл `bot_logs_YYYY-MM-DD.txt`
- **Автообновление**: Включает/выключает автоматическое обновление

### Размер логов

- Максимум 1000 строк (настраивается в `gui_config.ini`)
- Автоматическая очистка при превышении лимита
- Сохранение важных сообщений

## ⚙️ Настройки

### Доступ к настройкам

1. **Нажмите кнопку "Настройки"**
2. **Откроется окно конфигурации**
3. **Измените нужные параметры**
4. **Нажмите "Сохранить"**

### Основные настройки

```ini
[gui]
# Размер окна
window_size = normal          # compact, normal, large

# Тема интерфейса
theme = blue                  # blue, green, dark-blue

# Автосохранение токена
save_token = true

# Автозапуск бота
auto_start_bot = false

# Лимит строк в логах
max_log_lines = 1000

[bot]
# Режим отладки
debug = false

# Путь к Calibre
calibre_path = /usr/bin/ebook-convert
```

### Темы оформления

- **Blue** (по умолчанию): Синяя цветовая схема
- **Green**: Зеленая тема
- **Dark-blue**: Темно-синяя тема

### Размеры окна

- **Compact**: 700x500 пикселей
- **Normal**: 800x600 пикселей  
- **Large**: 1000x700 пикселей

## 🔧 Устранение неполадок

### Частые проблемы

#### Бот не запускается

```bash
Проблема: Кнопка "Запустить бота" не работает

Решения:
1. Проверьте токен бота
2. Убедитесь, что токен сохранен
3. Проверьте логи на ошибки
4. Перезапустите GUI
```

#### Токен не сохраняется

```bash
Проблема: "Токен сохранен" не появляется

Решения:
1. Проверьте права на запись в папке проекта
2. Убедитесь, что токен в правильном формате
3. Проверьте наличие файла .env
```

#### GUI не запускается

```bash
Проблема: Ошибка при запуске ./start_gui.sh

Решения:
1. Установите зависимости: ./start_gui.sh --install-deps
2. Проверьте Python: python3 --version
3. Установите tkinter: sudo apt install python3-tk
```

#### Логи не обновляются

```bash
Проблема: Логи застыли

Решения:
1. Проверьте включено ли автообновление
2. Перезапустите бота
3. Очистите и перезапустите логи
```

### Диагностика

```bash
# Проверка готовности
./start_gui.sh --check-only

# Отладочный режим
./start_gui.sh --debug

# Переустановка зависимостей
./start_gui.sh --install-deps

# Проверка процессов бота
ps aux | grep bot.py

# Проверка логов бота
tail -f bot.log
```

### Системные требования

- **Python**: 3.8 или новее
- **ОС**: Linux, macOS, Windows
- **ОЗУ**: Минимум 256 МБ
- **Место на диске**: 50 МБ

### Получение помощи

1. **Проверьте логи**: Ошибки часто указывают на проблему
2. **Документация**: Прочитайте README.md
3. **Issues**: Создайте issue на GitHub
4. **Дискуссии**: Участвуйте в GitHub Discussions

## 📚 Дополнительные ресурсы

- [README.md](README.md) - Общая документация
- [DEPLOY.md](DEPLOY.md) - Инструкции по развертыванию
- [CONTRIBUTING.md](CONTRIBUTING.md) - Руководство для разработчиков
- [GitHub Issues](https://github.com/YOUR_USERNAME/telegram-book-converter/issues) - Сообщения об ошибках

---

**💡 Совет**: Рекомендуется запускать GUI в фоновом режиме для постоянного мониторинга бота.
